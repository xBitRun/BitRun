# Rules

## 0. Workflow
- **Proposal First**: Propose solution -> Wait for approval -> Implement.
- **Docs First**: Check `docs/` for existing patterns before coding. Update docs if arch changes.

## 1. Internationalization (i18n) Standards (CRITICAL)

### General Rules
- **NEVER hardcode user-facing text** in `.tsx` files
- **ALL visible text** must use `useTranslations()` hook from `next-intl`
- Translation files: `frontend/src/messages/zh.json` and `frontend/src/messages/en.json`

### Implementation Pattern
```tsx
// âœ… Correct
import { useTranslations } from "next-intl";

export function MyComponent() {
  const t = useTranslations("myModule");
  return <Button>{t("buttonLabel")}</Button>;
}

// âŒ Wrong
export function MyComponent() {
  return <Button>Click me</Button>;
}
```

### What Must Be Translated
- Button labels, menu items, titles, descriptions
- Toast messages (`toast.success()`, `toast.error()`)
- Error messages, loading states, placeholders
- Form labels, validation messages
- Empty states, fallback text

### What Does NOT Need Translation
- Technical identifiers (IDs, keys)
- URLs, file paths
- Code/debug output
- Currency symbols ($), units (%, x)

### Translation Key Naming
- Use dot notation: `module.section.key`
- Group by feature: `accounts.toast.success`, `agents.error.loadFailed`
- Common keys in `common.*`: `common.loading`, `common.retry`, `common.cancel`

### Adding New Text
1. First add keys to BOTH `zh.json` and `en.json`
2. Then use `t("key")` in component
3. For dynamic content: `t("key", { count: 5 })`

### Checklist Before Commit
- [ ] No hardcoded Chinese text in `.tsx` files
- [ ] No hardcoded English text in `.tsx` files
- [ ] All toast messages use translation keys
- [ ] Error/retry buttons use translation keys
- [ ] Empty states use translation keys

## 2. Documentation Standards
- **Location**: All docs in `docs/` folder. Flat structure.
- **Language**: Simplified Chinese (zh-CN) for content.
- **Style**: Technical specifications (what/how/why), NOT chronological logs.
- **Format**: Clean Markdown. No Jekyll headers. No changelogs inside docs.
- **Process**: Update docs -> Code implementation.

## 3. Git Commit Standards (CRITICAL)
- **Format**: `<emoji> <type>: <ä¸»æ ‡é¢˜>`
- **Emoji Mapping**:
  - âœ¨ `feat`: æ–°åŠŸèƒ½ï¼ˆæ–°å¢åŠŸèƒ½ã€é¡µé¢ã€ç»„ä»¶ï¼‰
  - ğŸ› `fix`: ä¿®å¤ï¼ˆBug ä¿®å¤ï¼‰
  - ğŸ¨ `style`: æ ·å¼ï¼ˆUI æ ·å¼è°ƒæ•´ï¼‰
  - â™»ï¸ `refactor`: é‡æ„ï¼ˆä»£ç é‡æ„ï¼‰
  - ğŸ“ `docs`: æ–‡æ¡£ï¼ˆæ–‡æ¡£æ›´æ–°ï¼‰
  - ğŸ”§ `chore`: é…ç½®ï¼ˆé…ç½®/ä¾èµ–æ›´æ–°ï¼‰
  - âœ… `test`: æµ‹è¯•ï¼ˆæµ‹è¯•ç›¸å…³ï¼‰
  - ğŸš€ `perf`: æ€§èƒ½ï¼ˆæ€§èƒ½ä¼˜åŒ–ï¼‰
- **Title Rules**:
  - ä½¿ç”¨ä¸­æ–‡
  - ç®€æ´æ˜äº†ï¼Œä¸è¶…è¿‡ 50 å­—ç¬¦
  - åŠ¨è¯å¼€å¤´ï¼ˆæ–°å¢/ä¿®å¤/ä¼˜åŒ–/è°ƒæ•´/é‡æ„ï¼‰
- **Body Rules**:
  - åˆ—è¡¨å½¢å¼ï¼Œæ¯é¡¹ä»¥ `-` å¼€å¤´
  - è¯´æ˜å…·ä½“æ”¹åŠ¨ç‚¹
- **Examples**:
  ```bash
  âœ¨ feat: æ–°å¢ç”¨æˆ·ç™»å½•åŠŸèƒ½
  âœ¨ feat: æ–°å¢äº¤æ˜“æ¨¡å— UI
  - å®ç° Spot ç°è´§äº¤æ˜“é¢æ¿
  - å®ç° Equities æƒç›Šäº¤æ˜“é¢æ¿
  ğŸ› fix: ä¿®å¤è®¢å•æäº¤å¤±è´¥é—®é¢˜
  - ä¿®æ­£ç­¾åå‚æ•°æ ¼å¼
  ```
- **Requirements**:
  - æ¯æ¬¡æäº¤åªåšä¸€ä»¶äº‹
  - æäº¤å‰ç¡®ä¿ä»£ç å¯è¿è¡Œ
  - ç›¸å…³è”çš„æ”¹åŠ¨åˆå¹¶ä¸ºä¸€æ¬¡æäº¤
  - **ALWAYS** follow this format when making commits
